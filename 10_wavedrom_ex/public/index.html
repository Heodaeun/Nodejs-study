<!DOCTYPE html>
<html>
    <head>
        <title>WaveDrom</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body onload="WaveDrom.ProcessAll()">
    <!--script type="WaveDrom"을 timing diagram으로 출력해줌-->
        <h1 id="head">WaveDrom</h1>
        <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
        <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
        <!-- wavedrom web usage -->
        <script src="http://wavedrom.com/skins/default.js" type="text/javascript"></script>
        <script src="http://wavedrom.com/wavedrom.min.js" type="text/javascript"></script>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js"></script>
        
        <p id="p"></p>
        <script id=wavedrom></script>
        <!-- <script type="WaveDrom"> 
            { signal : [
                { name: "clk",  wave: "p......" },
                { name: "bus",  wave: "x.34.5x",   data: "head body tail" },
                { name: "wire", wave: "0.1..0." },
            ]}
        </script> -->
        <script>
            var socket = io("http://localhost:4000"); //connect to server
            
            socket.on('send_WaveDrom', function(drom){
                console.log('wavedrom: ', drom);

                var scr = document.getElementById('wavedrom');
                console.log(scr);
                
                scr.type = "WaveDrom";
                scr.innerText = drom;

                var p = document.getElementById('p');
                p.innerText = drom.signal[0].wave;

                // $("#wavedrom").load(window.location.href + "#wavedrom");

                // $("#div1").load(window.location.href + "#div1");
                console.log("s: ", scr.toString());
            });
        </script>
    </body>
    <style>
        h1, h4 {
            text-align: center;
            font-family: 'Lato', sans-serif;
        }
    </style>
</html>